<div class="row">
<div class="col-md-3">
<%= nested_form_for @category do |f| %>
  <div class="form-group fields">
    <%= label_tag(:name, "Category Name:") %>
    <%= f.text_field :name, class: "form-control" %>
  </div>
  <p>
    <%= link_to @category, method: :delete,
            data: { confirm: "Are you sure?" } do%>
            <i class="fa fa-trash" aria-hidden="true"></i>
            <% end %>
    </p>
  Products:
  <%= f.fields_for :products do |product_form| %>
  
    <div class="product-image">
    <% if product_form.object.image? %>
    <%= image_tag(product_form.object.image.url) %>
      <% else %>
      <i class="fa fa-4x fa-picture-o" aria-hidden="true"></i>
      <% end %>
    </div>

    <%= render 'product_fields', f: product_form %>
    <p><%= product_form.link_to_remove "Remove this product" %></p>
  <% end %>
  <p class="add-product-btn"><%= f.link_to_add "Add product", :products, class: "btn btn-primary" %></p>
  <%= f.submit "Submit", class: "btn btn-success" %>
<% end %>
</div>
</div>